<?php
#global config for mvc
#root-directory
define('ROOT', '/~fschocke/WS16_WebProg1/cms/');
define('CONTROLLER', 'index.php');

#directories and structures
define('FUNCTIONS', 'functions/functions.php');
define('VIEW', 'views/');
define('STYLES', 'css/style.css');
define('DATA', 'uploads/');
define('CLASSES', 'classes/');

#global context, debugging
define('CONTEXT', true);
define('DEBUG', false);

#views
define('DEFAULTPAGE', 'list.php');  #main view (currently list view)
define('ERRORPAGE', 'error.php');   #error view
define('LISTVIEW', 'list.php');     #list view
define('UPLOAD', 'upload.php');     #upload view
define('DELETE', 'delete.php');     #delete view

#queriesa
define('QUERY_BEGIN','?');
define('QUERY_NEXT','&');
define('QUERY_ELEMENT_ACTION','action=');
define('ACTION_LIST','list');
define('ACTION_UPLOAD','upload');
define('ACTION_DELETE','delete');

# view parts (helper)
define('PROLOG', 'prolog.php');
define('EPILOG', 'epilog.php');
define('NAVIGATION', 'navi.php');


debug(__FILE__,__LINE__,$params);

switch($params['action']) {
case ACTION_LIST:
	require VIEW.LISTVIEW;
	break;
case ACTION_UPLOAD:
	require VIEW.UPLOAD;
	break;
case ACTION_UPLOAD_PART2:
	if($params['upload']['error'] == UPLOAD_ERR_NO_FILE){
		require VIEW.UPLOAD;
	}
	if($params['upload']['error'] != UPLOAD_ERR_OK){
		require VIEW.ERROR;
	}
	$filename = time();
	if(move_uploaded_file($params['upload']['tmp_name'], $DATA.$filename)){
		// ...
	} else {
		require VIEW.ERRORPAGE;
	}
	break;
case ACTION_DELETE:
	require VIEW.DELETE;
	break;
default:
	require VIEW.DEFAULTPAGE;
}

?>
