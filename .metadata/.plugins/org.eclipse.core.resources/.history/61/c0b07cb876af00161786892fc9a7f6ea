package ColumnBasedGame;

import javafx.scene.Group;
import javafx.scene.layout.AnchorPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;

public class GameColumn {

	private Group column;
	private GamePiece[] pieces;
	private Rectangle[] places;
	private int columNo;
	private int fallDepth;
	private double columnWidth;
	private double rowHeight;
	private int xPos;

	public GameColumn(double columnWidth2, double rowHeight2, int columNo, int columnDepth, double margin, AnchorPane parent, Color stroke) {
		this.columnWidth = columnWidth2;
		this.rowHeight = rowHeight2;
		this.columNo = columNo;
		column = new Group();
		Rectangle r;
		places = new Rectangle[columnDepth + 1];
		pieces = new GamePiece[columnDepth + 1];
		fallDepth = columnDepth;
		xPos = (int) (columNo * (columnWidth2 + margin));

		new PutButton(columnWidth2, rowHeight2, xPos, columNo, column);
		
		for (int c = 0; c < columnDepth; c++) {
			r = new Rectangle(xPos, 2*rowHeight2 + (c * rowHeight2), columnWidth2, rowHeight2);
			r.setFill(Color.TRANSPARENT);
			r.setStroke(stroke);
			r.setMouseTransparent(true);
			places[c] = r;
			column.getChildren().add(places[c]);
		}

		parent.getChildren().add(column);

	}

	public int getFallDepth() {
		return fallDepth;
	}

	public void pushPiece(GamePiece piece) {
		if (fallDepth > 0) {
			column.getChildren().add(piece.getCircle());
			pieces[fallDepth] = piece;
			FallService.addCircle(this, piece.getCircle());
			fallDepth--;
			ColumnGame.switchTeam();
		}
	}

	public int getX() {
		return xPos;
	}

	public double getColumnWidth() {
		return columnWidth;
	}

	public double getRowHeight() {
		return rowHeight;
	}

}
